module.exports.config = {
  name: "nsv",
  version: "1.0.0",
  hasPermssion: 0, // рж╕ржмрж╛ржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ
  credits: "Hridoy (with Grok help)",
  description: "NSV ржЧрзНрж░рзБржкрзЗрж░ рждржерзНржп ржжрзЗржЦрж╛ржмрзЗ (Rules, Ranking, Detail, FB Group)",
  commandCategory: "Utility",
  usages: ".nsv",
  cooldowns: 5
};

module.exports.run = async function({ api, event, args }) {
  const { threadID, messageID, body } = event;

  // ржкрзНрж░ржержорзЗ ржорзЗржирзБ ржкрж╛ржарж╛ржмрзЗ
  if (!args[0]) {
    const menuText = `тЧетЫйя╕П NSV ржЧрж╛ржЗржб тЫйя╕ПтЧд
Naruto Shippuden Verse (NSV)

ржЖржкржирж╛рж░ ржкржЫржирзНржжрзЗрж░ ржЕржкрж╢ржи рж░рж┐ржкрзНрж▓рж╛ржЗ ржХрж░рзБржи:

тЮд рзз. Rules (ржирж┐ржпрж╝ржорж╛ржмрж▓рзА)
тЮд рзи. Ranking (рж░тАНрзНржпрж╛ржЩрзНржХрж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржо)
тЮд рзй. Detail (ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рждржерзНржп)
тЮд рзк. FB Group (ржЧрзНрж░рзБржк рж▓рж┐ржВржХ)

рж░рж┐ржкрзНрж▓рж╛ржЗ ржжрж┐ржи рж╢рзБржзрзБ ржиржорзНржмрж░ ржжрж┐ржпрж╝рзЗ (ржпрзЗржоржи: рзз ржмрж╛ Rules)`;

    return api.sendMessage(menuText, threadID, (err, info) => {
      if (err) return;
      global.client.handleReply.push({
        name: "nsv",
        type: "menu",
        messageID: info.messageID,
        author: event.senderID
      });
    }, messageID);
  }

  // рж░рж┐ржкрзНрж▓рж╛ржЗ рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░ржмрзЗ
  const handleReply = global.client.handleReply.find(item => item.messageID == event.messageReply?.messageID && item.author == event.senderID);
  if (!handleReply || handleReply.type !== "menu") return;

  const choice = event.body.trim().toLowerCase();
  let content = "";
  let title = "";

  if (choice == "1" || choice.includes("rules") || choice == "рзз") {
    title = "тЪая╕П NSV ржирж┐ржпрж╝ржорж╛ржмрж▓рзА тЪая╕П";
    content = `тЧетЫйя╕П ржирж┐ржиржЬрж╛ ржЧрж╛ржЗржб тЫйя╕ПтЧд
тАФ NSV Village (Naruto Shippuden Verse) тАФ
"рж╢рзГржЩрзНржЦрж▓рж╛ржЗ ржЖржорж╛ржжрзЗрж░ рж╢ржХрзНрждрж┐, рж╕ржорзНржорж╛ржиржЗ ржЖржорж╛ржжрзЗрж░ ржкрже"

рзз. рж╕ржорзНржорж╛ржи ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзБржи тАФ рж╕рж┐ржирж┐ржпрж╝рж░, ржЕржлрж┐рж╕рж╛рж░ ржУ рж╕ржХрж▓ рж╕ржжрж╕рзНржпрзЗрж░ ржкрзНрж░рждрж┐ рж╢рзНрж░ржжрзНржзрж╛рж╢рзАрж▓ рж╣рзЛржиред
рзи. ржЕржкржорж╛ржи/ржЧрж╛рж▓рж┐/ржЕрж╢рзНрж▓рзАрж▓рждрж╛ ржирж┐рж╖рж┐ржжрзНржзред
рзй. Jiraiya-рж╕рзНржЯрж╛ржЗрж▓ ржмрж╛ ржХрзБ-ржЪрж░рж┐рждрзНрж░рзЗрж░ ржЖржЪрж░ржг ржирж┐рж╖рж┐ржжрзНржзред
рзк. ржзрж░рзНржо, рж░рж╛ржЬржирзАрждрж┐ ржУ ржмрзНржпржХрзНрждрж┐ржЧржд ржмрж┐рж╢рзНржмрж╛рж╕ ржирж┐ржпрж╝рзЗ ржЖрж▓рзЛржЪржирж╛ ржиржпрж╝ред
рзл. ржпрзМржи ржЗржЩрзНржЧрж┐рждржкрзВрж░рзНржг ржмрж╛ рж╣рзНржпрж╛рж░рж╛рж╕рж┐ржВ ржмрзНржпржмрж╣рж╛рж░ рж╕ржорзНржкрзВрж░рзНржг ржирж┐рж╖рж┐ржжрзНржзред
рзм. ржирж╛рж░рзАржжрзЗрж░ ржкрзНрж░рждрж┐ рж╕рж░рзНржмрзЛржЪрзНржЪ рж╕ржорзНржорж╛ржи ржмржЬрж╛ржпрж╝ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗред
рзн. ржЕржирзБржорждрж┐ ржЫрж╛ржбрж╝рж╛ рж▓рж┐ржВржХ, ржмрж┐ржЬрзНржЮрж╛ржкржи ржмрж╛ ржкрзНрж░рзЛржорзЛрж╢ржи ржиржпрж╝ред
рзо. 18+ ржХржиржЯрзЗржирзНржЯ, ржнрж╛рж╖рж╛ ржмрж╛ ржЖрж▓рзЛржЪржирж╛ ржирж┐рж╖рж┐ржжрзНржзред
рзп. ржмрж╛рж░ржмрж╛рж░ рж╕рзНржкрзНржпрж╛ржо, ржЕржкрзНрж░рж╛рж╕ржЩрзНржЧрж┐ржХ ржХржерж╛ ржмрж╛ рждрж░рзНржХ ржиржпрж╝ред
рззрзж. тАЬText OffтАЭ ржШрзЛрж╖ржгрж╛рж░ ржкрж░ ржорзЗрж╕рзЗржЬ ржкрж╛ржарж╛ржирзЛ ржпрж╛ржмрзЗ ржирж╛ред
рззрзз. ржирж┐ржЬрзЗрж░ ржорзЗрж╕рзЗржЬ Unsent ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛ред
рззрзи. Village ржерж┐ржо, ржирж╛ржо ржмрж╛ рж╕рзЗржЯрж┐ржВрж╕ рж╢рзБржзрзБ рж╕рзБржкрзНрж░рж┐ржо ржмрж╛ ржХрж╛ржЧрзЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред
рззрзй. ржлрзЗржХ ржЖржЗржбрж┐ ржмрж╛ ржПржХрж╛ржзрж┐ржХ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржирж┐рж╖рж┐ржжрзНржзред
рззрзк. Village ржЫрж╛ржбрж╝рж╛рж░ ржЖржЧрзЗ ржХрж╛ржЧрзЗрж░ ржЕржирзБржорждрж┐ ржирж┐рждрзЗ рж╣ржмрзЗ (ржирж╛ рж╣рж▓рзЗ рззрзж ржжрж┐ржи ржмрзНржпрж╛ржи)ред
рззрзл. NSV-ржПрж░ ржмрж╛ржЗрж░рзЗрж░ ржмрж┐рж╖ржпрж╝ ржирж┐ржпрж╝рзЗ ржмрж┐рждрж░рзНржХ ржиржпрж╝ред
рззрзм. ржоржбрж╛рж░рзЗржЯрж░/ржХрж╛ржЧрзЗтАЩрж░ рж╕рж┐ржжрзНржзрж╛ржирзНржд ржЪрзВржбрж╝рж╛ржирзНрждред
рззрзн. рж╕ржорж╕рзНржпрж╛ржпрж╝ ржХрж╛ржЧрзЗ, ржХрзНржпрж╛ржкрзНржЯрзЗржи ржмрж╛ ржЕрзНржпрж╛ржбржорж┐ржирзЗрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рзБржиред

тЪФя╕П рж╢рж╛рж╕рзНрждрж┐:
рззржоржмрж╛рж░ тЖТ рж╕рждрж░рзНржХ
рзиржпрж╝ тЖТ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржоржпрж╝ ржмрзНржпрж╛ржи
рзйржпрж╝ тЖТ рзз-рзй ржжрж┐ржи ржмрзНржпрж╛ржи
рзкрж░рзНрже тЖТ рж╕рзНржерж╛ржпрж╝рзА ржмрж╣рж┐рж╖рзНржХрж╛рж░

"рж╢рзГржЩрзНржЦрж▓рж╛ ржорж╛ржирзЗржЗ рж╢ржХрзНрждрж┐!"`;
  } else if (choice == "2" || choice.includes("ranking") || choice == "рзи") {
    title = "ЁЯМА NSV Ninja Ranking System ЁЯМА";
    content = `TOP LEADERS:
1. Supreme Shinobi ЁЯеЗтЪЬя╕П
2. Supreme Assistant ЁЯеИЁЯОЧя╕П
3. Grand Shinobi ЁЯФотЬи
4. External Elite Shinobi ЁЯМЯтЪЬя╕П

VILLAGE LEADERS:
1. Village Kage ЁЯССтЪб
2. Shadow Kage ЁЯМСЁЯГП
3. Kage Assistant тЪФя╕ПЁЯЫбя╕П

SHINOBI FORCES:
1. Anbu Force ЁЯе╖
2. Police Force ЁЯСотАНтЩВя╕П
3. Elite Jonin ЁЯЦд
4. J┼Нnin ЁЯдН
5. Ch┼лnin тЭдя╕П
6. Genin ЁЯТЬ
7. Academy Student ЁЯй╡`;
  } else if (choice == "3" || choice.includes("detail") || choice == "рзй") {
    title = "NSV: ржЕрзНржпрж╛ржирж┐ржорзЗ ржЬржЧрждрзЗрж░ ржирждрзБржи ржЕржзрзНржпрж╛ржпрж╝";
    content = `NSV (Naruto Shippuden Verse) рж╢рзБржзрзБ ржПржХржЯрж╛ ржЧрзНрж░рзБржк ржиржпрж╝тАФржПржЯрж╛ ржПржХржЯрж╛ ржкрзВрж░рзНржг ржЕрзНржпрж╛ржирж┐ржорзЗ ржЗржЙржирж┐ржнрж╛рж░рзНрж╕!

ржПржЦрж╛ржирзЗ ржЖржЫрзЗ:
тАв ржЪрж░рж┐рждрзНрж░ржнрж┐рждрзНрждрж┐ржХ рж░тАНрзНржпрж╛ржЩрзНржХрж┐ржВ
тАв ржЧрзНрж░рж╛ржоржнрж┐рждрзНрждрж┐ржХ рж░рж╛ржЬржирзАрждрж┐ ржУ рж╕ржВржШрж╛ржд
тАв ржирж┐ржЬрж╕рзНржм ржЧрж▓рзНржк, ржорж┐рж╢ржи, ржЯрзБрж░рзНржирж╛ржорзЗржирзНржЯ
тАв рж░рж┐ржпрж╝рзЗрж▓-ржЯрж╛ржЗржо ржЗржнрзЗржирзНржЯ ржУ ржЪрзБржирж┐ржи ржПржХрзНрж╕рж╛ржо

ржЖржкржирж┐ ржирж┐ржЬрзЗржЗ ржЧрж▓рзНржкрзЗрж░ ржирж╛ржпрж╝ржХ! ржЧрзЗржирж┐ржи ржерзЗржХрзЗ рж╢рзБрж░рзБ ржХрж░рзЗ ржХрж┐ржВржмржжржирзНрждрзА рж╢рж┐ржирзЛржмрж┐ рж╣рзЛржиред
рзлржЯрж┐ ржЧрзНрж░рзЗржЯ ржирзЗрж╢ржи, ржирж┐ржЬрзЗрж░ ржЧрзНрж░рж╛ржо ржмрзЗржЫрзЗ ржирж┐ржи, рж▓ржбрж╝рж╛ржЗ ржХрж░рзБржи, ржирзЗрждрзГрждрзНржм ржжрж┐ржиред

ржкрзНрж░рж╕рзНрждрзБржд рждрзЛ? NSV awaits your legacy! ЁЯФе`;
  } else if (choice == "4" || choice.includes("group") || choice.includes("fb") || choice == "рзк") {
    title = "NSV Official Facebook Group";
    content = `ржпрзЛржЧ ржжрж┐ржи NSV-рждрзЗ ржПржЦржиржЗ!
рж▓рж┐ржВржХ: https://facebook.com/groups/586145137775514/

ржПржЦрж╛ржирзЗржЗ рж╢рзБрж░рзБ рж╣рзЛржХ рждрзЛржорж╛рж░ рж╢рж┐ржирзЛржмрж┐ ржпрж╛рждрзНрж░рж╛... ЁЯМА`;
  } else {
    return api.sendMessage("ржжржпрж╝рж╛ ржХрж░рзЗ рж╕ржарж┐ржХ ржЕржкрж╢ржи рж░рж┐ржкрзНрж▓рж╛ржЗ ржХрж░рзБржи (рзз, рзи, рзй, рзк ржмрж╛ Rules/Ranking/Detail/Group)", threadID, messageID);
  }

  // рж╕рзБржирзНржжрж░ ржХрж░рзЗ ржкрж╛ржарж╛ржирзЛ
  const styledText = `тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ
${title}
тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ

${content}

тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ
NSV - рж╢рзГржЩрзНржЦрж▓рж╛ржЗ рж╢ржХрзНрждрж┐! тЫйя╕П`;
  
  api.sendMessage(styledText, threadID, messageID);
  
  // рж╣рзНржпрж╛ржирзНржбрзЗрж▓ рж░рж┐ржорзБржн ржХрж░рзЛ
  const index = global.client.handleReply.indexOf(handleReply);
  if (index !== -1) global.client.handleReply.splice(index, 1);
};

module.exports.handleReply = async function({ api, event }) {
  // ржПржЦрж╛ржирзЗ ржЖрж╕рж▓рзЗ ржХрж┐ржЫрзБ рж▓рж╛ржЧржмрзЗ ржирж╛, ржХрж╛рж░ржг run-ржПржЗ рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ
};